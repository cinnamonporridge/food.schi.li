= form_with(model: form, data: { turbo: false }) do |f|
  .bg-white.px-4.py-6.rounded.shadow.flex.flex-col.gap-y-4
    .flex.flex-col.gap-y-6
      .flex.flex-col.gap-y-2
        .flex
          .grow
            - if form.object.meal.recipe?
              .flex.flex-col
                .text-xs.text-green-700 Recipe
                .text-sm.text-gray-600= form.object.meal.decorate.display_recipe_name
          .shrink-0
            .flex.flex-col.gap-y-1.text-right
              .text-xs.text-green-700 Journal day
              .text-sm.text-gray-600= form.object.meal.journal_day.decorate.display_date

      .flex.flex-col.gap-y-2
        .flex.flex-col
          = f.label :portion_name, 'Portion', class: 'label'
          = f.text_field :portion_name, list: :portion_id_list, class: 'input'
          = render 'layouts/forms/field_errors', errors: f.object.errors, key: :portion_name
          %datalist#portion_id_list
            = options_for_select PortionDecorator.portions_collection(form.user)

        .flex.flex-col
          = f.label :amount_in_measure, class: 'label'
          = f.number_field :amount_in_measure, step: 0.001, class: 'input', inputmode: 'decimal'
          = render 'layouts/forms/field_errors', errors: f.object.errors, key: :amount_in_measure

        .flex.flex-col
          = f.label :measure, class: 'label'
          = f.select :measure, IngredientDecorator.measures_collection, {}, { class: 'input' }

      .actions.flex.flex-col.gap-y-2.mt-2
        .w-full
          = f.button type: :submit, class: 'button gap-x-1' do
            - action_text = form.new_record? ? 'Add meal ingredient' : 'Update meal ingredient'
            = render Forms::SubmitButtonComponent.new(object: form.object, text: action_text)
        .w-full.text-center
          = link_to 'Cancel', form.object.meal.journal_day, class: 'text-xs text-gray-400 hover:text-gray-500 transition'
