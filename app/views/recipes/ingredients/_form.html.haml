= form_with(model: form, url: form.action_url, data: { turbo: false }) do |f|
  .bg-white.rounded.overflow-hidden.shadow.divide-y.divide-gray-200
    .pt-2.pb-4.px-4.flex.flex-col.gap-y-2
      .flex.flex-col
        = f.label :portion_name, class: 'label'
        = f.text_field :portion_name, class: 'input', list: :portion_id_list
        = render 'layouts/forms/field_errors', errors: f.object.errors, key: :portion_name
        %datalist#portion_id_list
          = options_for_select PortionDecorator.portions_collection(form.user)
        = f.hidden_field :portion_id

      .grid.grid-cols-5.gap-4
        .col-span-3.flex.flex-col
          = f.label :amount_in_measure, class: 'label'
          = f.number_field :amount_in_measure, class: 'input', min: 0, step: 0.001, inputmode: 'decimal'
          = render 'layouts/forms/field_errors', errors: f.object.errors, key: :amount_in_measure

        .col-span-2.flex.flex-col
          = f.label :measure, class: 'label'
          = f.select :measure, IngredientDecorator.measures_collection, {}, { class: 'input' }

    .p-4.flex.flex-col.gap-y-2
      = f.button type: :submit, class: 'input button flex items-center gap-x-1' do
        - if f.object.persisted?
          .h-4.w-4
            = raw heroicon :pencil
          Update ingredient
        - else
          .h-4.w-4
            = raw heroicon :'plus-sm'
          Add ingredient

      .text-center
        = link_to 'Cancel', form.ingredient.recipe, class: 'shy-link text-xs'
